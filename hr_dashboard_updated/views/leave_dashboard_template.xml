<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <template id="leave_dashboard_template" name="Leave Management Dashboard">
    <t t-call="website.layout">

      <style>
        /* Sidebar */
        .dashboard-sidebar {
          position: fixed;
          top: 70px; /* navbar height */
          left: 0;
          height: 100%;
          width: 240px;
          background: #f8f9fa;
          border-right: 1px solid #dee2e6;
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          z-index: 1000;
          padding-top: 15px;
        }
        .dashboard-sidebar .list-group-item {
          border: none;
          border-radius: 0;
          padding: 14px 18px;
          font-weight: 500;
          color: #495057;
          transition: all 0.3s ease;
        }
        .dashboard-sidebar .list-group-item:hover {
          background-color: #e9ecef;
        }
        .dashboard-sidebar .list-group-item.active {
          background: linear-gradient(45deg, #0d6efd, #4dabf7);
          color: #fff;
          font-weight: 600;
        }

        /* Content */
        .dashboard-content {
          margin-left: 260px;
          padding: 30px 20px;
        }

        /* Cards */
        .summary-card {
          border-radius: 20px;
          color: #fff;
          padding: 20px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.08);
          transition: transform 0.2s ease;
        }
        .summary-card:hover {
          transform: translateY(-5px);
        }
        .summary-icon {
          font-size: 28px;
          margin-bottom: 10px;
        }

        /* Leave badges */
        .badge-leave {
          padding: 6px 12px;
          border-radius: 12px;
          font-size: 0.9rem;
        }

        /* Tables */
        .table th {
          text-transform: uppercase;
          font-size: 0.85rem;
          letter-spacing: 0.5px;
        }
      </style>

      <div class="container-fluid">
        <div class="row">

          <!-- Sidebar -->
          <div class="dashboard-sidebar">
            <div class="list-group">
              <a href="/attendance/dashboard" class="list-group-item list-group-item-action">
                <i class="fa fa-calendar-check me-2"></i> Attendance
              </a>
              <a href="/leave/dashboard" class="list-group-item list-group-item-action active">
                <i class="fa fa-plane me-2"></i> Leave Management
              </a>
            </div>
          </div>

          <!-- Main Content -->
          <div class="dashboard-content col">

            <h2 class="fw-bold mb-3 text-primary">Leave Management</h2>
            <h6 class="text-muted mb-4">
              <i class="fa fa-user-circle me-1"></i>
              <t t-esc="data['employee']"/> | Joined: <t t-esc="data['joining_date']"/>
            </h6>

            <!-- Leave Summary Cards -->
            <div class="row g-4 mb-4">
              <t t-foreach="data['leave_summary'].items()" t-as="leave">
                <div class="col-md-3">
                  <div class="summary-card" style="background: linear-gradient(45deg, #6f42c1, #d63384);">
                    <div class="summary-icon"><i class="fa fa-plane"></i></div>
                    <h6><t t-esc="leave[0]"/></h6>
                    <h3><t t-esc="leave[1]"/> days</h3>
                  </div>
                </div>
              </t>
              <t t-if="not data['leave_summary']">
                <div class="col-12 text-center text-muted">No leave data available</div>
              </t>
            </div>

            <!-- Leave Table -->
            <div class="card shadow-sm rounded-4">
              <div class="card-body">
                <h5 class="fw-bold mb-3">Leave Details</h5>
                <div class="table-responsive">
                  <table class="table table-hover align-middle">
                    <thead class="table-dark">
                      <tr>
                        <th>Type</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Days</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <t t-foreach="data['leaves']" t-as="leave">
                        <tr>
                          <td><span class="badge bg-primary badge-leave"><t t-esc="leave['type']"/></span></td>
                          <td><t t-esc="leave['from']"/></td>
                          <td><t t-esc="leave['to']"/></td>
                          <td><t t-esc="leave['days']"/></td>
                          <td>
                            <t t-if="leave.get('status')=='validate'">
                              <span class="badge bg-success">Approved</span>
                            </t>
                            <t t-if="leave.get('status')=='confirm'">
                              <span class="badge bg-info">To Approve</span>
                            </t>
                            <t t-if="leave.get('status')=='refuse'">
                              <span class="badge bg-danger">Refused</span>
                            </t>
                          </td>
                        </tr>
                      </t>
                      <t t-if="not data['leaves']">
                        <tr>
                          <td colspan="5" class="text-center text-muted">No leaves this month</td>
                        </tr>
                      </t>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

          </div> <!-- End content -->
        </div>
      </div>

    </t>
  </template>
</odoo>
